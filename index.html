<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura Collection - Gents Jewelry</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDKs (FIXED VERSION) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script>
        // Your Firebase Configuration
       const firebaseConfig = {
  apiKey: "AIzaSyDBAazRZ6zkLAoqXwmR3T-OBMFz60kPSC0",
  authDomain: "resuly-f7e54.firebaseapp.com",
  databaseURL: "https://resuly-f7e54-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "resuly-f7e54",
  storageBucket: "resuly-f7e54.firebasestorage.app",
  messagingSenderId: "43803503464",
  appId: "1:43803503464:web:d973cac632004424ab84dd"
};

        // Initialize Firebase
        try {
            // Check if Firebase is already initialized
            if (!firebase.apps.length) {
                const app = firebase.initializeApp(firebaseConfig);
                console.log("✅ Firebase initialized successfully!");
            } else {
                console.log("✅ Firebase already initialized!");
            }
        } catch (error) {
            console.error("❌ Firebase initialization error:", error);
        }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #0a0a0a;
            color: #fff;
        }

        /* Header & Logo */
        header {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            padding: 15px 0;
            border-bottom: 2px solid #d4af37;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 20px;
            cursor: pointer;
        }

        .logo-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(45deg, #d4af37, #ffd700, #d4af37);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #fff;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            position: relative;
            overflow: hidden;
            animation: rotateLogo 20s linear infinite;
        }

        @keyframes rotateLogo {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .logo-initial {
            font-size: 32px;
            font-weight: bold;
            color: #000;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
        }

        .logo-circle img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .logo-circle.has-image .logo-initial {
            display: none;
        }

        .logo-circle.has-image img {
            display: block;
        }

        .logo-text-container {
            display: flex;
            flex-direction: column;
        }

        .logo-main-text {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(45deg, #d4af37, #ffd700, #d4af37);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1;
        }

        .logo-subtext {
            font-size: 14px;
            color: #d4af37;
            letter-spacing: 3px;
            margin-top: 5px;
        }

        nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
            gap: 20px;
        }

        nav ul li a {
            color: #fff;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 4px;
            transition: all 0.3s;
        }

        nav ul li a:hover, nav ul li a.active {
            background-color: #d4af37;
            color: #000;
        }

        /* Header Social Media Icons */
        .header-social-icons {
            display: flex;
            gap: 10px;
        }

        .social-icon-small {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #2a2a2a;
            color: #d4af37;
            text-decoration: none;
            font-size: 16px;
            transition: all 0.3s;
            border: 1px solid #d4af37;
        }

        .social-icon-small:hover {
            transform: translateY(-2px);
        }

        .social-icon-small.facebook:hover {
            background: #1877f2;
            border-color: #1877f2;
            color: white;
        }

        .social-icon-small.instagram:hover {
            background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%);
            border-color: transparent;
            color: white;
        }

        .social-icon-small.tiktok:hover {
            background: #000000;
            border-color: #000000;
            color: #00f2ea;
        }

        .social-icon-small.whatsapp:hover {
            background: #25D366;
            border-color: #25D366;
            color: white;
        }

        /* Categories Section with Background Logo */
        .categories-section {
            padding: 80px 0;
            background: #111;
            position: relative;
            min-height: 100vh;
        }

        .categories-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 200 200"><text x="50%" y="50%" font-family="Arial" font-size="60" font-weight="bold" fill="rgba(212, 175, 55, 0.05)" text-anchor="middle" dy=".3em">Aura</text></svg>');
            background-repeat: repeat;
            background-size: 400px;
            opacity: 0.1;
            pointer-events: none;
        }

        .section-title {
            font-size: 36px;
            text-align: center;
            margin-bottom: 50px;
            color: #d4af37;
            position: relative;
            z-index: 1;
        }

        .section-title:after {
            content: '';
            position: absolute;
            width: 100px;
            height: 3px;
            background: #d4af37;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }

        .category-card {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid #d4af37;
            transition: all 0.4s;
            position: relative;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(212, 175, 55, 0.3);
            border-color: #ffd700;
        }

        .category-card:nth-child(1) {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
            border-color: #d4af37;
        }

        .category-card:nth-child(2) {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
            border-color: #d4af37;
        }

        .category-card:nth-child(3) {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
            border-color: #d4af37;
        }

        .category-card:nth-child(4) {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
            border-color: #d4af37;
        }

        .category-card:nth-child(5) {
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.9) 0%, rgba(42, 42, 42, 0.9) 100%);
            border-color: #d4af37;
        }

        .category-content {
            padding: 40px 30px;
            z-index: 2;
            position: relative;
        }

        .category-icon {
            font-size: 64px;
            color: #d4af37;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }

        .category-title {
            font-size: 32px;
            color: #fff;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .category-description {
            color: #ccc;
            font-size: 16px;
            line-height: 1.6;
            max-width: 300px;
            margin: 0 auto;
        }

        /* Category Pages */
        .category-page {
            min-height: 100vh;
            padding: 100px 0 60px;
            position: relative;
        }

        .category-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 200 200"><text x="50%" y="50%" font-family="Arial" font-size="60" font-weight="bold" fill="rgba(212, 175, 55, 0.03)" text-anchor="middle" dy=".3em">Aura</text></svg>');
            background-repeat: repeat;
            background-size: 400px;
            opacity: 0.1;
            pointer-events: none;
        }

        .category-header {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
            z-index: 1;
        }

        .category-header-icon {
            font-size: 80px;
            color: #d4af37;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
        }

        .category-header h1 {
            font-size: 48px;
            color: #d4af37;
            margin-bottom: 15px;
        }

        .category-header p {
            font-size: 18px;
            color: #ccc;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Back to Categories Button */
        .back-to-categories {
            display: inline-block;
            background: #d4af37;
            color: #000;
            padding: 12px 30px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            margin: 30px 0;
            transition: all 0.3s;
            border: 2px solid #d4af37;
        }

        .back-to-categories:hover {
            background: transparent;
            color: #d4af37;
            transform: translateY(-3px);
        }

        /* Admin Panel */
        .admin-panel {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 30px;
            border-radius: 10px;
            margin: 30px auto;
            max-width: 1200px;
            border: 1px solid #d4af37;
            display: none;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #d4af37;
        }

        .admin-title {
            font-size: 28px;
            color: #d4af37;
        }

        .admin-toggle {
            background: #d4af37;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #d4af37;
            font-weight: 500;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #d4af37;
            border-radius: 5px;
            color: #fff;
            font-size: 16px;
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
        }

        .image-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 10px;
        }

        .image-option {
            border: 2px dashed #d4af37;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-option:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        .image-option i {
            font-size: 48px;
            color: #d4af37;
            margin-bottom: 15px;
        }

        .image-option h4 {
            color: #d4af37;
            margin-bottom: 10px;
        }

        .url-input-container {
            margin-top: 15px;
        }

        .image-preview {
            max-width: 300px;
            max-height: 300px;
            margin: 15px auto;
            display: none;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 5px;
            border: 2px solid #d4af37;
        }

        .remove-image {
            background: #ff4444;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            display: inline-block;
        }

        .image-size-warning {
            font-size: 12px;
            color: #ff9800;
            margin-top: 5px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .admin-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #d4af37;
            color: #000;
        }

        .btn-primary:hover {
            background: #ffd700;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #333;
            color: #fff;
            border: 1px solid #d4af37;
        }

        .btn-secondary:hover {
            background: #444;
        }

        .btn-danger {
            background: #ff4444;
            color: white;
        }

        .btn-danger:hover {
            background: #ff6666;
            transform: translateY(-2px);
        }

        /* Logo Upload Section */
        .logo-upload-section {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid #d4af37;
        }

        .logo-upload-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .logo-upload-title {
            font-size: 20px;
            color: #d4af37;
        }

        .logo-preview-container {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .logo-current {
            text-align: center;
        }

        .logo-current h4 {
            color: #d4af37;
            margin-bottom: 10px;
        }

        /* Products Section */
        .products-section {
            padding: 60px 0;
            background: #0a0a0a;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .product-card {
            background: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #333;
            transition: all 0.3s;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            border-color: #d4af37;
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.2);
        }

        .product-image {
            height: 250px;
            overflow: hidden;
            background: #2a2a2a;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-info {
            padding: 20px;
        }

        .product-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: #fff;
        }

        .product-category {
            color: #d4af37;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .product-price {
            font-size: 24px;
            color: #d4af37;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .product-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-small {
            padding: 8px 15px;
            font-size: 14px;
        }

        .delete-btn {
            background: #ff4444;
            color: white;
        }

        .delete-btn:hover {
            background: #ff6666;
        }

        /* Order Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .order-modal {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            border: 2px solid #d4af37;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #d4af37;
        }

        .modal-close {
            background: none;
            border: none;
            color: #d4af37;
            font-size: 24px;
            cursor: pointer;
        }

        /* Orders Section */
        .orders-section {
            background: #1a1a1a;
            padding: 60px 0;
            margin-top: 60px;
            border-top: 2px solid #d4af37;
        }

        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .orders-table th, .orders-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #333;
        }

        .orders-table th {
            background: #2a2a2a;
            color: #d4af37;
            font-weight: 600;
        }

        .status-pending {
            color: #ff9800;
        }

        .status-completed {
            color: #4CAF50;
        }

        /* Footer & Contact Section */
        footer {
            background: #1a1a1a;
            padding: 50px 0 20px;
            margin-top: 60px;
            border-top: 2px solid #d4af37;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            color: #d4af37;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .footer-column p, .footer-column a {
            color: #ccc;
            margin-bottom: 10px;
            display: block;
            text-decoration: none;
        }

        .footer-column a:hover {
            color: #d4af37;
        }

        .order-notification {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #d4af37;
            margin-top: 20px;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #333;
            color: #777;
            font-size: 14px;
        }

        /* Small Social Media Contact Box */
        .social-contact-box {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border: 1px solid #d4af37;
            text-align: center;
            max-width: 400px;
        }

        .social-contact-box h4 {
            color: #d4af37;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 18px;
        }

        .social-contact-box h4 i {
            font-size: 20px;
        }

        .social-icons-small {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .social-icon-small-box {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #1a1a1a;
            color: #d4af37;
            text-decoration: none;
            font-size: 18px;
            transition: all 0.3s;
            border: 2px solid #d4af37;
        }

        .social-icon-small-box:hover {
            transform: translateY(-3px);
        }

        .social-icon-small-box.facebook:hover {
            background: #1877f2;
            border-color: #1877f2;
            color: white;
        }

        .social-icon-small-box.instagram:hover {
            background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%);
            border-color: transparent;
            color: white;
        }

        .social-icon-small-box.tiktok:hover {
            background: #000000;
            border-color: #000000;
            color: #00f2ea;
        }

        .social-icon-small-box.whatsapp:hover {
            background: #25D366;
            border-color: #25D366;
            color: white;
        }

        .social-contact-text {
            color: #ccc;
            font-size: 13px;
            line-height: 1.5;
            margin-top: 10px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            display: none;
            z-index: 3000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .notification.error {
            background: #f44336;
        }

        .url-loading {
            display: none;
            color: #d4af37;
            text-align: center;
            margin-top: 10px;
        }

        /* Admin Products List */
        .admin-products-section {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 10px;
            margin-top: 30px;
            border: 1px solid #d4af37;
        }

        .admin-products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #d4af37;
        }

        .admin-products-title {
            font-size: 22px;
            color: #d4af37;
        }

        .admin-products-table {
            width: 100%;
            border-collapse: collapse;
        }

        .admin-products-table th, .admin-products-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #333;
        }

        .admin-products-table th {
            background: #2a2a2a;
            color: #d4af37;
            font-weight: 600;
        }

        .admin-products-table tr:hover {
            background: rgba(212, 175, 55, 0.05);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .edit-btn {
            background: #2196F3;
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 12px;
        }

        .edit-btn:hover {
            background: #42a5f5;
        }

        /* Confirm Delete Modal */
        .confirm-modal {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            border: 2px solid #ff4444;
        }

        .confirm-modal h3 {
            color: #ff4444;
            margin-bottom: 20px;
        }

        .confirm-modal p {
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .confirm-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        /* Admin Settings */
        .admin-settings {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            border: 1px solid #d4af37;
        }

        .admin-settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #d4af37;
        }

        .admin-settings-title {
            font-size: 20px;
            color: #d4af37;
        }

        .settings-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .save-settings-btn {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
        }

        .save-settings-btn:hover {
            background: #66bb6a;
        }

        /* Firebase Status */
        .firebase-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .firebase-connected {
            background: #4CAF50;
            color: white;
        }

        .firebase-disconnected {
            background: #f44336;
            color: white;
        }

        /* Order Delete Admin Controls */
        .admin-orders-control {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #d4af37;
        }

        .admin-orders-control h3 {
            color: #d4af37;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .admin-order-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .order-delete-btn {
            background: #ff4444;
            color: white;
            padding: 8px 16px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .order-delete-btn:hover {
            background: #ff6666;
            transform: translateY(-2px);
        }

        /* STOCK MANAGEMENT STYLES */
        .excel-stock-section {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 10px;
            margin-top: 30px;
            border: 1px solid #d4af37;
        }

        .excel-stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #d4af37;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
        }

        .excel-table-container {
            overflow-x: auto;
            margin-top: 20px;
            background: #2a2a2a;
            border-radius: 10px;
            padding: 15px;
        }

        .excel-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1200px;
        }

        .excel-table th {
            background: #333;
            color: #d4af37;
            padding: 12px;
            text-align: left;
            border: 1px solid #444;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .excel-table td {
            padding: 10px;
            border: 1px solid #444;
            text-align: left;
            background: #1a1a1a;
        }

        .excel-table tr:hover td {
            background: rgba(212, 175, 55, 0.1);
        }

        .low-stock {
            background: rgba(255, 68, 68, 0.1) !important;
            color: #ff4444;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .excel-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .profit-positive {
            color: #4CAF50;
            font-weight: bold;
        }

        .profit-negative {
            color: #ff4444;
            font-weight: bold;
        }

        .stock-tabs {
            display: flex;
            border-bottom: 2px solid #d4af37;
            margin-bottom: 20px;
        }

        .stock-tab {
            padding: 12px 24px;
            background: #2a2a2a;
            border: none;
            color: #ccc;
            cursor: pointer;
            font-weight: 500;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            margin-right: 5px;
            transition: all 0.3s;
        }

        .stock-tab.active {
            background: #d4af37;
            color: #000;
        }

        .stock-tab:hover {
            background: rgba(212, 175, 55, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid;
        }

        .stat-box h4 {
            color: #ccc;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .stat-box .stat-value {
            font-size: 22px;
            font-weight: bold;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                gap: 15px;
            }
            
            .logo-main-text {
                font-size: 28px;
            }
            
            .category-card {
                height: 250px;
            }
            
            .category-icon {
                font-size: 48px;
            }
            
            .category-title {
                font-size: 24px;
            }

            .summary-cards {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }

            .excel-table-container {
                font-size: 14px;
            }
        }

        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .image-options {
                grid-template-columns: 1fr;
            }
            
            .logo-main-text {
                font-size: 24px;
            }
            
            .logo-subtext {
                font-size: 12px;
                letter-spacing: 2px;
            }
            
            .admin-actions {
                flex-direction: column;
            }
            
            .admin-products-table {
                display: block;
                overflow-x: auto;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .settings-form {
                grid-template-columns: 1fr;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
            }
            
            .social-contact-box {
                max-width: 100%;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }

            .excel-controls {
                flex-direction: column;
            }

            .stock-tabs {
                flex-wrap: wrap;
            }

            .stock-tab {
                flex: 1;
                text-align: center;
                padding: 10px 15px;
                font-size: 14px;
            }

            .summary-cards {
                grid-template-columns: 1fr 1fr;
            }

            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .logo-circle {
                width: 60px;
                height: 60px;
            }
            
            .logo-initial {
                font-size: 28px;
            }
            
            .logo-main-text {
                font-size: 20px;
            }
            
            .category-card {
                height: 220px;
            }
            
            .category-icon {
                font-size: 40px;
            }
            
            .category-title {
                font-size: 20px;
            }
            
            .social-icon-small-box {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .summary-cards {
                grid-template-columns: 1fr;
            }

            .quick-stats {
                grid-template-columns: 1fr;
            }

            .excel-table th,
            .excel-table td {
                padding: 8px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Header with Logo -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-container" onclick="goToHome()">
                    <div class="logo-circle" id="logoCircle">
                        <div class="logo-initial">A</div>
                        <img id="logoImage" src="" alt="Aura Collection Logo">
                    </div>
                    <div class="logo-text-container">
                        <div class="logo-main-text">Aura Collection</div>
                        <div class="logo-subtext">GENTS JEWELRY</div>
                    </div>
                </div>
                
                <nav>
                    <ul>
                        <li><a href="#home" class="active" onclick="showHomePage()">Home</a></li>
                        <li><a href="#categories" onclick="showCategoriesPage()">Categories</a></li>
                        <li><a href="#products" onclick="showProductsPage()">Products</a></li>
                        <li><a href="#admin" onclick="toggleAdminPanel()">Admin Panel</a></li>
                        <li><a href="#contact" onclick="showContactPage()">Contact</a></li>
                    </ul>
                </nav>
                
                <div class="header-social-icons">
                    <a href="https://www.facebook.com/share/16tQ61986W/" class="social-icon-small facebook" target="_blank" title="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/auracollection194?igsh=OXRwMHpjM2J3czI0" class="social-icon-small instagram" target="_blank" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://tiktok.com/@usman14211" class="social-icon-small tiktok" target="_blank" title="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                    <a href="https://wa.me/923057067726" class="social-icon-small whatsapp" target="_blank" title="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <div id="homePage" class="category-page">
        <div class="container">
            <div class="category-header">
                <div class="category-header-icon">
                    <i class="fas fa-crown"></i>
                </div>
                <h1>Welcome to Aura Collection</h1>
                <p>Premium Gents Jewelry crafted for the modern man. Luxury meets masculinity in every piece.</p>
                
                <a href="#categories" class="back-to-categories" onclick="showCategoriesPage()">
                    Browse Categories
                </a>
            </div>
            
            <!-- Featured Products -->
            <div class="products-section">
                <h2 class="section-title">Featured Products</h2>
                <div class="products-grid" id="featuredProductsContainer">
                    <!-- Featured products will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Categories Page -->
    <div id="categoriesPage" class="categories-section" style="display: none;">
        <div class="container">
            <h2 class="section-title">Our Categories</h2>
            <div class="categories-grid">
                <div class="category-card" onclick="showCategoryPage('bracelets')">
                    <div class="category-content">
                        <div class="category-icon">
                            <i class="fas fa-gem"></i>
                        </div>
                        <h3 class="category-title">Bracelets</h3>
                        <p class="category-description">
                            Elegant bracelets crafted with precision, combining luxury with comfort for the modern gentleman.
                        </p>
                    </div>
                </div>
                
                <div class="category-card" onclick="showCategoryPage('rings')">
                    <div class="category-content">
                        <div class="category-icon">
                            <i class="fas fa-ring"></i>
                        </div>
                        <h3 class="category-title">Rings</h3>
                        <p class="category-description">
                            Statement rings that symbolize power and sophistication, designed to make a lasting impression.
                        </p>
                    </div>
                </div>
                
                <div class="category-card" onclick="showCategoryPage('chains')">
                    <div class="category-content">
                        <div class="category-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <h3 class="category-title">Chains & Necklaces</h3>
                        <p class="category-description">
                            Premium chains and necklaces that redefine masculine elegance with every detail.
                        </p>
                    </div>
                </div>
                
                <div class="category-card" onclick="showCategoryPage('watches')">
                    <div class="category-content">
                        <div class="category-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3 class="category-title">Watches</h3>
                        <p class="category-description">
                            Timeless watches that blend functionality with luxury, perfect for any occasion.
                        </p>
                    </div>
                </div>
                
                <div class="category-card" onclick="showCategoryPage('cufflinks')">
                    <div class="category-content">
                        <div class="category-icon">
                            <i class="fas fa-cufflinks"></i>
                        </div>
                        <h3 class="category-title">Cufflinks</h3>
                        <p class="category-description">
                            Exquisite cufflinks that add the perfect finishing touch to your formal attire.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Individual Category Pages -->
    <div id="braceletsPage" class="category-page" style="display: none;">
        <div class="container">
            <div class="category-header">
                <div class="category-header-icon">
                    <i class="fas fa-gem"></i>
                </div>
                <h1>Bracelets Collection</h1>
                <p>Discover our exclusive collection of premium bracelets designed for the modern gentleman.</p>
                
                <a href="#categories" class="back-to-categories" onclick="showCategoriesPage()">
                    Back to Categories
                </a>
            </div>
            
            <div class="products-grid" id="braceletsProducts">
                <!-- Bracelets products will be loaded here -->
            </div>
        </div>
    </div>

    <div id="ringsPage" class="category-page" style="display: none;">
        <div class="container">
            <div class="category-header">
                <div class="category-header-icon">
                    <i class="fas fa-ring"></i>
                </div>
                <h1>Rings Collection</h1>
                <p>Explore our stunning collection of rings that make a bold statement.</p>
                
                <a href="#categories" class="back-to-categories" onclick="showCategoriesPage()">
                    Back to Categories
                </a>
            </div>
            
            <div class="products-grid" id="ringsProducts">
                <!-- Rings products will be loaded here -->
            </div>
        </div>
    </div>

    <div id="chainsPage" class="category-page" style="display: none;">
        <div class="container">
            <div class="category-header">
                <div class="category-header-icon">
                    <i class="fas fa-link"></i>
                </div>
                <h1>Chains & Necklaces Collection</h1>
                <p>Browse our premium collection of chains and necklaces for every occasion.</p>
                
                <a href="#categories" class="back-to-categories" onclick="showCategoriesPage()">
                    Back to Categories
                </a>
            </div>
            
            <div class="products-grid" id="chainsProducts">
                <!-- Chains products will be loaded here -->
            </div>
        </div>
    </div>

    <div id="watchesPage" class="category-page" style="display: none;">
        <div class="container">
            <div class="category-header">
                <div class="category-header-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <h1>Watches Collection</h1>
                <p>Discover our exquisite collection of luxury watches.</p>
                
                <a href="#categories" class="back-to-categories" onclick="showCategoriesPage()">
                    Back to Categories
                </a>
            </div>
            
            <div class="products-grid" id="watchesProducts">
                <!-- Watches products will be loaded here -->
            </div>
        </div>
    </div>

    <div id="cufflinksPage" class="category-page" style="display: none;">
        <div class="container">
            <div class="category-header">
                <div class="category-header-icon">
                    <i class="fas fa-cufflinks"></i>
                </div>
                <h1>Cufflinks Collection</h1>
                <p>Explore our elegant collection of cufflinks for formal occasions.</p>
                
                <a href="#categories" class="back-to-categories" onclick="showCategoriesPage()">
                    Back to Categories
                </a>
            </div>
            
            <div class="products-grid" id="cufflinksProducts">
                <!-- Cufflinks products will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Products Page -->
    <div id="productsPage" class="products-section" style="display: none;">
        <div class="container">
            <h2 class="section-title">All Products</h2>
            <div class="products-grid" id="allProductsContainer">
                <!-- All products will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Contact Page -->
    <div id="contactPage" style="display: none;">
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-column">
                        <h3>Aura Collection</h3>
                        <p>Premium Gents Jewelry crafted for the modern man. Luxury meets masculinity in every piece.</p>
                        
                        <!-- Small Social Media Contact Box -->
                        <div class="social-contact-box">
                            <h4><i class="fas fa-share-alt"></i> Follow Us</h4>
                            <div class="social-icons-small">
                                <a href="https://www.facebook.com/share/16tQ61986W/" class="social-icon-small-box facebook" target="_blank" title="Facebook">
                                    <i class="fab fa-facebook-f"></i>
                                </a>
                                <a href="https://www.instagram.com/auracollection194?igsh=OXRwMHpjM2J3czI0" class="social-icon-small-box instagram" target="_blank" title="Instagram">
                                    <i class="fab fa-instagram"></i>
                                </a>
                                <a href="https://tiktok.com/@usman14211" class="social-icon-small-box tiktok" target="_blank" title="TikTok">
                                    <i class="fab fa-tiktok"></i>
                                </a>
                                <a href="https://wa.me/923057067726" class="social-icon-small-box whatsapp" target="_blank" title="WhatsApp">
                                    <i class="fab fa-whatsapp"></i>
                                </a>
                            </div>
                            <p class="social-contact-text">
                                Stay connected for latest collections and exclusive offers.
                            </p>
                        </div>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Contact Information</h3>
                        <p><i class="fas fa-envelope"></i> <span id="footerEmail">rr3221676@gmail.com</span></p>
                        <p><i class="fas fa-phone"></i> <span id="footerPhone">+1 (555) 123-4567</span></p>
                        <p><i class="fas fa-map-marker-alt"></i> <span id="footerAddress">123 Luxury Avenue, New York, NY</span></p>
                        
                        <!-- Business Hours -->
                        <div style="margin-top: 20px;">
                            <h4 style="color: #d4af37; margin-bottom: 10px;">Business Hours</h4>
                            <p>Monday - Thursday: 9AM - 12PM</p>
                            <p>Saturday-Sunday: 24H</p>
                            <p>FRIDAY: Closed</p>
                        </div>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Quick Links</h3>
                        <a href="#home" onclick="showHomePage()">Home</a>
                        <a href="#categories" onclick="showCategoriesPage()">Categories</a>
                        <a href="#products" onclick="showProductsPage()">Products</a>
                        <a href="#admin" onclick="toggleAdminPanel()">Admin Login</a>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Customer Support</h3>
                        <p>Email notifications for all orders</p>
                        <p>24/7 Customer Support</p>
                        <p>Secure Payment</p>
        
                        
                        <div style="margin-top: 20px;">
                            <p><strong>Need Help?</strong></p>
                            <p>Contact us via email or phone for any inquiries about our products or orders.</p>
                        </div>
                    </div>
                </div>
                
                <div class="copyright">
                    <p>&copy; 2024 Aura Collection - Gents Jewelry. All rights reserved.</p>
                    <p style="margin-top: 10px; font-size: 12px;">
                        Follow us: 
                        <a href="https://www.facebook.com/share/16tQ61986W/" target="_blank" style="color: #d4af37;">Facebook</a> | 
                        <a href="https://www.instagram.com/auracollection194?igsh=OXRwMHpjM2J3czI0" target="_blank" style="color: #d4af37;">Instagram</a> | 
                        <a href="https://tiktok.com/@usman14211" target="_blank" style="color: #d4af37;">TikTok</a> |
                        <a href="https://wa.me/923057067726" target="_blank" style="color: #d4af37;">WhatsApp</a>
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Admin Panel -->
    <div class="container">
        <div class="admin-panel" id="adminPanel">
            <div class="admin-header">
                <h2 class="admin-title">Admin Dashboard 
                    <span id="firebaseStatus" class="firebase-status firebase-disconnected">Firebase: Offline</span>
                </h2>
                <button class="admin-toggle" onclick="toggleAdminPanel()">Close Admin</button>
            </div>
            
            <!-- Logo Upload Section -->
            <div class="logo-upload-section">
                <div class="logo-upload-header">
                    <h3 class="logo-upload-title">Website Logo Settings</h3>
                </div>
                
                <div class="form-group">
                    <label for="logoUpload">Upload Logo Image</label>
                    <div class="image-options">
                        <div class="image-option" onclick="showLogoFileUpload()">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <h4>Upload Logo</h4>
                            <p>Upload logo image for website</p>
                            <p class="image-size-warning">Recommended: 200x200px, PNG with transparency</p>
                            <input type="file" id="logoUpload" accept="image/*" style="display: none;" onchange="uploadLogo(event)">
                        </div>
                        
                        <div class="image-option" onclick="showLogoUrlInput()">
                            <i class="fas fa-link"></i>
                            <h4>Logo URL</h4>
                            <p>Paste logo URL from web</p>
                            <p class="image-size-warning">PNG with transparent background preferred</p>
                        </div>
                    </div>
                    
                    <div id="logoUrlInputContainer" class="url-input-container" style="display: none;">
                        <input type="url" id="logoUrl" placeholder="https://example.com/logo.png" style="margin-bottom: 10px;">
                        <button type="button" class="btn btn-primary" onclick="loadLogoFromUrl()">Load Logo</button>
                        <button type="button" class="btn btn-secondary" onclick="hideLogoUrlInput()">Cancel</button>
                        <div class="url-loading" id="logoUrlLoading">
                            <i class="fas fa-spinner fa-spin"></i> Loading logo...
                        </div>
                    </div>
                    
                    <div class="logo-preview-container">
                        <div class="logo-current">
                            <h4>Current Logo Preview</h4>
                            <div class="logo-circle" style="margin: 0 auto;">
                                <div class="logo-initial">A</div>
                                <img id="currentLogoImage" src="" alt="Current Logo">
                            </div>
                            <button type="button" class="remove-image" onclick="removeLogo()" style="margin-top: 10px;">Remove Logo</button>
                        </div>
                        
                        <div style="flex: 1;">
                            <h4 style="color: #d4af37; margin-bottom: 10px;">Logo Display</h4>
                            <p style="color: #ccc; font-size: 14px;">
                                The logo will appear in the header on all pages. For best results, use a square image with transparent background.
                            </p>
                            <p style="color: #ff9800; font-size: 12px; margin-top: 10px;">
                                <i class="fas fa-info-circle"></i> Maximum file size: 2MB
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- STOCK MANAGEMENT DASHBOARD -->
            <div class="excel-stock-section">
                <div class="excel-stock-header">
                    <h3 style="color: #d4af37; font-size: 24px;">
                        <i class="fas fa-file-excel"></i> Stock Management Dashboard
                    </h3>
                    <div>
                        <button class="btn btn-primary" onclick="exportToExcel()">
                            <i class="fas fa-file-export"></i> Export to Excel
                        </button>
                        <button class="btn btn-secondary" onclick="showAddProductStock()">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="stat-box" style="border-left-color: #4CAF50;">
                        <h4>Total Products</h4>
                        <div class="stat-value" id="totalProductsStat">0</div>
                    </div>
                    <div class="stat-box" style="border-left-color: #2196F3;">
                        <h4>Total Stock Value</h4>
                        <div class="stat-value" id="totalStockValueStat">Rs 0</div>
                    </div>
                    <div class="stat-box" style="border-left-color: #FF9800;">
                        <h4>Low Stock Items</h4>
                        <div class="stat-value" id="lowStockItemsStat">0</div>
                    </div>
                    <div class="stat-box" style="border-left-color: #9C27B0;">
                        <h4>Total Profit</h4>
                        <div class="stat-value" id="totalProfitStat">Rs 0</div>
                    </div>
                    <div class="stat-box" style="border-left-color: #00BCD4;">
                        <h4>Total Sales</h4>
                        <div class="stat-value" id="totalSalesStat">Rs 0</div>
                    </div>
                </div>

                <!-- Stock Tabs -->
                <div class="stock-tabs">
                    <button class="stock-tab active" onclick="showStockTab('all')">All Products</button>
                    <button class="stock-tab" onclick="showStockTab('low')">Low Stock</button>
                    <button class="stock-tab" onclick="showStockTab('sales')">Sales Report</button>
                    <button class="stock-tab" onclick="showStockTab('profit')">Profit Analysis</button>
                </div>

                <!-- Search and Filters -->
                <div class="excel-controls">
                    <div class="search-box" style="flex: 1; min-width: 300px;">
                        <input type="text" id="stockSearch" placeholder="Search by Product Name, Code (AU01), Category..." 
                               style="width: 100%; padding: 10px; background: #2a2a2a; border: 1px solid #d4af37; color: white; border-radius: 5px;"
                               onkeyup="searchStock()">
                    </div>
                    <div class="filter-controls" style="display: flex; gap: 10px;">
                        <select id="categoryFilter" onchange="filterStock()" style="padding: 10px; background: #2a2a2a; border: 1px solid #d4af37; color: white; border-radius: 5px;">
                            <option value="">All Categories</option>
                            <option value="bracelets">Bracelets</option>
                            <option value="rings">Rings</option>
                            <option value="chains">Chains & Necklaces</option>
                            <option value="watches">Watches</option>
                            <option value="cufflinks">Cufflinks</option>
                        </select>
                        <select id="stockStatusFilter" onchange="filterStock()" style="padding: 10px; background: #2a2a2a; border: 1px solid #d4af37; color: white; border-radius: 5px;">
                            <option value="">All Status</option>
                            <option value="low">Low Stock (< 5)</option>
                            <option value="out">Out of Stock</option>
                            <option value="available">In Stock</option>
                        </select>
                    </div>
                </div>

                <!-- Excel-like Table -->
                <div class="excel-table-container">
                    <table class="excel-table" id="stockTable">
                        <thead>
                            <tr>
                                <th>Product Code</th>
                                <th>Product Name</th>
                                <th>Category</th>
                                <th>Cost Price (Rs)</th>
                                <th>Selling Price (Rs)</th>
                                <th>Initial Stock</th>
                                <th>Remaining Stock</th>
                                <th>Sold Stock</th>
                                <th>Total Cost (Rs)</th>
                                <th>Total Sales (Rs)</th>
                                <th>Profit (Rs)</th>
                                <th>Stock Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="stockTableBody">
                            <!-- Stock data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Summary Footer -->
                <div style="margin-top: 20px; padding: 15px; background: #2a2a2a; border-radius: 10px; border: 1px solid #d4af37;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div>
                            <h4 style="color: #d4af37; margin-bottom: 5px;">Summary</h4>
                            <p style="color: #ccc; font-size: 14px;">Total Products: <span id="summaryTotalProducts">0</span></p>
                            <p style="color: #ccc; font-size: 14px;">Total Investment: <span id="summaryTotalInvestment">Rs 0</span></p>
                            <p style="color: #ccc; font-size: 14px;">Total Sales Value: <span id="summaryTotalSales">Rs 0</span></p>
                            <p style="color: #4CAF50; font-size: 14px; font-weight: bold;">Net Profit: <span id="summaryNetProfit">Rs 0</span></p>
                        </div>
                        <div>
                            <h4 style="color: #d4af37; margin-bottom: 5px;">Stock Alerts</h4>
                            <div id="stockAlerts" style="max-height: 100px; overflow-y: auto;">
                                <!-- Stock alerts will appear here -->
                            </div>
                        </div>
                        <div>
                            <h4 style="color: #d4af37; margin-bottom: 5px;">Quick Actions</h4>
                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <button class="btn btn-primary btn-small" onclick="showAddProductStock()">
                                    <i class="fas fa-plus"></i> Add Product
                                </button>
                                <button class="btn btn-secondary btn-small" onclick="exportToExcel()">
                                    <i class="fas fa-download"></i> Export
                                </button>
                                <button class="btn btn-secondary btn-small" onclick="updateStockCalculations()">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Add Product Form (Updated with Cost Price) -->
            <form id="productForm" style="margin-top: 30px;">
                <div class="form-row">
                    <div class="form-group">
                        <label for="productCode">Product Code (e.g., AU01)</label>
                        <input type="text" id="productCode" placeholder="AU01" required>
                    </div>
                    <div class="form-group">
                        <label for="productName">Product Name</label>
                        <input type="text" id="productName" placeholder="e.g., Diamond Chain" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productCategory">Category</label>
                        <select id="productCategory" required>
                            <option value="">Select Category</option>
                            <option value="bracelets">Bracelets</option>
                            <option value="rings">Rings</option>
                            <option value="chains">Chains & Necklaces</option>
                            <option value="watches">Watches</option>
                            <option value="cufflinks">Cufflinks</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="productStock">Initial Stock Quantity</label>
                        <input type="number" id="productStock" placeholder="e.g., 50" required min="1">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="costPrice">Cost Price (Rs)</label>
                        <input type="number" id="costPrice" placeholder="e.g., 1500" required min="1" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="productPrice">Selling Price (Rs)</label>
                        <input type="number" id="productPrice" placeholder="e.g., 2999" required min="1" step="0.01">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="productDescription">Description</label>
                    <textarea id="productDescription" placeholder="Describe the product..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="productImage">Product Image</label>
                    <div class="image-options">
                        <div class="image-option" onclick="showFileUpload()">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <h4>Upload Image</h4>
                            <p>Choose file from your computer</p>
                            <p class="image-size-warning">Max size: 5MB (JPG, PNG)</p>
                            <input type="file" id="imageUpload" accept="image/*" style="display: none;" onchange="uploadImage(event)">
                        </div>
                        
                        <div class="image-option" onclick="showUrlInput()">
                            <i class="fas fa-link"></i>
                            <h4>Image URL</h4>
                            <p>Paste image URL from web</p>
                            <p class="image-size-warning">Supports: JPG, PNG, GIF, WebP</p>
                        </div>
                    </div>
                    
                    <div id="urlInputContainer" class="url-input-container" style="display: none;">
                        <input type="url" id="imageUrl" placeholder="https://example.com/image.jpg" style="margin-bottom: 10px;">
                        <button type="button" class="btn btn-primary" onclick="loadImageFromUrl()">Load Image</button>
                        <button type="button" class="btn btn-secondary" onclick="hideUrlInput()">Cancel</button>
                        <div class="url-loading" id="urlLoading">
                            <i class="fas fa-spinner fa-spin"></i> Loading image...
                        </div>
                    </div>
                    
                    <div class="image-preview" id="imagePreview">
                        <img id="previewImage" src="" alt="Preview">
                        <div style="text-align: center; margin-top: 10px;">
                            <button type="button" class="remove-image" onclick="removeImage()">Remove Image</button>
                        </div>
                    </div>
                </div>
                
                <div class="admin-actions">
                    <button type="submit" class="btn btn-primary">Add Product</button>
                    <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
                    <button type="button" class="btn btn-secondary" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn btn-danger" onclick="deleteAllProducts()">Delete All Products</button>
                    <button type="button" class="btn btn-secondary" onclick="syncWithFirebase()">Sync with Firebase</button>
                </div>
            </form>
            
            <!-- Admin Orders Section -->
            <div class="admin-orders-control">
                <h3><i class="fas fa-shopping-cart"></i> Order Management</h3>
                <p>Total Orders: <strong id="totalOrdersCount">0</strong></p>
                <div class="admin-order-actions">
                    <button class="btn btn-secondary" onclick="refreshOrdersList()">
                        <i class="fas fa-sync-alt"></i> Refresh Orders
                    </button>
                    <button class="btn btn-danger order-delete-btn" onclick="deleteAllOrders()">
                        <i class="fas fa-trash"></i> Delete All Orders
                    </button>
                </div>
                
                <div style="overflow-x: auto; margin-top: 20px;">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Product</th>
                                <th>Amount</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="adminOrdersTable">
                            <!-- Orders will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Admin Settings -->
            <div class="admin-settings">
                <div class="admin-settings-header">
                    <h3 class="admin-settings-title">Admin Settings</h3>
                </div>
                <div class="settings-form">
                    <div class="form-group">
                        <label for="adminCodeInput">Admin Access Code</label>
                        <input type="text" id="adminCodeInput" placeholder="Enter new admin code" value="AURA2024">
                    </div>
                    <div class="form-group">
                        <label for="adminEmail">Admin Email</label>
                        <input type="email" id="adminEmail" value="rr3221676@gmail.com" placeholder="admin@example.com">
                    </div>
                    <div class="form-group">
                        <label for="adminPhone">Admin Phone</label>
                        <input type="tel" id="adminPhone" value="+1 (555) 123-4567" placeholder="+1234567890">
                    </div>
                    <div class="form-group">
                        <label for="adminContact">Contact Info</label>
                        <input type="text" id="adminContact" value="123 Luxury Avenue, New York, NY" placeholder="Business address">
                    </div>
                </div>
                <button class="save-settings-btn" onclick="saveAdminSettings()">Save Settings</button>
            </div>
            
            <!-- Admin Products List -->
            <div class="admin-products-section">
                <div class="admin-products-header">
                    <h3 class="admin-products-title">Manage Products (Total: <span id="productCount">0</span>)</h3>
                    <div>
                        <button class="btn btn-secondary" onclick="refreshProductsList()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-secondary" onclick="loadFromFirebase()">
                            <i class="fas fa-cloud-download-alt"></i> Load from Firebase
                        </button>
                    </div>
                </div>
                
                <table class="admin-products-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Product Name</th>
                            <th>Category</th>
                            <th>Cost (Rs)</th>
                            <th>Price (Rs)</th>
                            <th>Stock</th>
                            <th>Sold</th>
                            <th>Profit (Rs)</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="adminProductsTable">
                        <!-- Admin products list will be dynamically added here -->
                    </tbody>
                </table>
            </div>
            
            <div class="order-notification" style="margin-top: 30px;">
                <h3><i class="fas fa-envelope"></i> Admin Contact Information</h3>
                <p>Email: <strong id="adminEmailDisplay">rr3221676@gmail.com</strong></p>
                <p>Phone: <strong id="adminPhoneDisplay">+1 (555) 123-4567</strong></p>
                <p>Address: <strong id="adminContactDisplay">123 Luxury Avenue, New York, NY</strong></p>
                <p>Admin Code: <strong id="adminCodeDisplay">AURA2024</strong> | Last sync: <span id="lastCheck">Just now</span></p>
            </div>
        </div>
    </div>

    <!-- Order Modal -->
    <div class="modal-overlay" id="orderModal">
        <div class="order-modal">
            <div class="modal-header">
                <h2 style="color: #d4af37;">Place Order</h2>
                <button class="modal-close" onclick="closeOrderModal()">&times;</button>
            </div>
            <form id="orderForm">
                <div class="form-group">
                    <label for="customerName">Your Name</label>
                    <input type="text" id="customerName" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="customerEmail">Email Address</label>
                    <input type="email" id="customerEmail" placeholder="you@example.com" required>
                </div>
                <div class="form-group">
                    <label for="customerPhone">Phone Number</label>
                    <input type="tel" id="customerPhone" placeholder="+1234567890" required>
                </div>
                <div class="form-group">
                    <label for="customerAddress">Shipping Address</label>
                    <textarea id="customerAddress" placeholder="Full address for delivery" required></textarea>
                </div>
                <div class="form-group">
                    <label>Order Summary</label>
                    <div id="orderSummary" style="background: #2a2a2a; padding: 15px; border-radius: 5px;"></div>
                </div>
                <div class="admin-actions">
                    <button type="submit" class="btn btn-primary">Confirm Order</button>
                    <button type="button" class="btn btn-secondary" onclick="closeOrderModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="modal-overlay" id="confirmDeleteModal">
        <div class="confirm-modal">
            <h3><i class="fas fa-exclamation-triangle"></i> Confirm Delete</h3>
            <p id="confirmDeleteMessage">Are you sure you want to delete this?</p>
            <div class="confirm-actions">
                <button class="btn btn-danger" onclick="confirmDelete()">Yes, Delete</button>
                <button class="btn btn-secondary" onclick="cancelDelete()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Product Stock Modal -->
    <div class="modal-overlay" id="addProductModal">
        <div class="order-modal" style="max-width: 600px;">
            <div class="modal-header">
                <h2 style="color: #d4af37;">Add New Product</h2>
                <button class="modal-close" onclick="closeAddProductModal()">&times;</button>
            </div>
            <form id="quickProductForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="quickProductCode">Product Code*</label>
                        <input type="text" id="quickProductCode" placeholder="AU01" required>
                    </div>
                    <div class="form-group">
                        <label for="quickProductName">Product Name*</label>
                        <input type="text" id="quickProductName" placeholder="Diamond Chain" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="quickCategory">Category*</label>
                        <select id="quickCategory" required>
                            <option value="">Select Category</option>
                            <option value="bracelets">Bracelets</option>
                            <option value="rings">Rings</option>
                            <option value="chains">Chains & Necklaces</option>
                            <option value="watches">Watches</option>
                            <option value="cufflinks">Cufflinks</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quickStock">Initial Stock*</label>
                        <input type="number" id="quickStock" placeholder="50" required min="1">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="quickCostPrice">Cost Price (Rs)*</label>
                        <input type="number" id="quickCostPrice" placeholder="1500" required min="1" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="quickSellingPrice">Selling Price (Rs)*</label>
                        <input type="number" id="quickSellingPrice" placeholder="2999" required min="1" step="0.01">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="quickDescription">Description</label>
                    <textarea id="quickDescription" placeholder="Product description..."></textarea>
                </div>
                
                <div class="admin-actions">
                    <button type="submit" class="btn btn-primary">Add Product</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAddProductModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div class="modal-overlay" id="editProductModal">
        <div class="order-modal" style="max-width: 600px;">
            <div class="modal-header">
                <h2 style="color: #d4af37;">Edit Product</h2>
                <button class="modal-close" onclick="closeEditProductModal()">&times;</button>
            </div>
            <form id="editProductForm">
                <input type="hidden" id="editProductId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editProductCode">Product Code*</label>
                        <input type="text" id="editProductCode" required>
                    </div>
                    <div class="form-group">
                        <label for="editProductName">Product Name*</label>
                        <input type="text" id="editProductName" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editCategory">Category*</label>
                        <select id="editCategory" required>
                            <option value="">Select Category</option>
                            <option value="bracelets">Bracelets</option>
                            <option value="rings">Rings</option>
                            <option value="chains">Chains & Necklaces</option>
                            <option value="watches">Watches</option>
                            <option value="cufflinks">Cufflinks</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editStock">Current Stock*</label>
                        <input type="number" id="editStock" required min="0">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editCostPrice">Cost Price (Rs)*</label>
                        <input type="number" id="editCostPrice" required min="1" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="editSellingPrice">Selling Price (Rs)*</label>
                        <input type="number" id="editSellingPrice" required min="1" step="0.01">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editSoldStock">Sold Stock</label>
                        <input type="number" id="editSoldStock" min="0" readonly>
                    </div>
                    <div class="form-group">
                        <label for="editInitialStock">Initial Stock</label>
                        <input type="number" id="editInitialStock" min="0" readonly>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editDescription">Description</label>
                    <textarea id="editDescription"></textarea>
                </div>
                
                <div class="admin-actions">
                    <button type="submit" class="btn btn-primary">Update Product</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditProductModal()">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="showDeleteProductModal()">Delete Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // ========== GLOBAL VARIABLES ==========
        let currentOrderProduct = null;
        let uploadedImage = null;
        let uploadedLogo = null;
        let productToDelete = null;
        let editProductId = null;
        let currentStockTab = 'all';
        let productsWithStock = [];
        let currentPage = 'home';
        
        // Admin settings
        let adminSettings = JSON.parse(localStorage.getItem('aura_admin_settings')) || {
            adminCode: "AURA2024",
            adminEmail: "rr3221676@gmail.com",
            adminPhone: "+1 (555) 123-4567",
            adminContact: "123 Luxury Avenue, New York, NY",
            logoImage: null
        };

        // Products data (with stock management fields)
        let products = JSON.parse(localStorage.getItem('aura_products')) || [];

        // Orders data
        let orders = JSON.parse(localStorage.getItem('aura_orders')) || [];

        // Firebase database reference
        let db = firebase.database();

        // ========== FIREBASE FUNCTIONS ==========
        function syncWithFirebase() {
            showNotification('Syncing with Firebase...');
            
            try {
                // Save products to Firebase
                const productsRef = db.ref('aura/products');
                productsRef.set(products)
                    .then(() => {
                        // Save orders to Firebase
                        const ordersRef = db.ref('aura/orders');
                        return ordersRef.set(orders);
                    })
                    .then(() => {
                        // Save settings to Firebase
                        const settingsRef = db.ref('aura/settings');
                        return settingsRef.set(adminSettings);
                    })
                    .then(() => {
                        showNotification('Data successfully synced with Firebase!');
                        updateFirebaseStatus(true);
                        document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
                    })
                    .catch(error => {
                        console.error('Firebase sync error:', error);
                        showNotification('Failed to sync with Firebase: ' + error.message, 'error');
                        updateFirebaseStatus(false);
                    });
            } catch (error) {
                console.error('Firebase sync error:', error);
                showNotification('Firebase not initialized properly', 'error');
                updateFirebaseStatus(false);
            }
        }

        function loadFromFirebase() {
            showNotification('Loading data from Firebase...');
            
            try {
                // Load products from Firebase
                const productsRef = db.ref('aura/products');
                productsRef.once('value')
                    .then(snapshot => {
                        if (snapshot.exists()) {
                            const firebaseProducts = snapshot.val();
                            if (Array.isArray(firebaseProducts)) {
                                products = firebaseProducts;
                            } else if (typeof firebaseProducts === 'object') {
                                products = Object.values(firebaseProducts);
                            }
                            saveToLocalStorage();
                        }
                        
                        // Load orders from Firebase
                        const ordersRef = db.ref('aura/orders');
                        return ordersRef.once('value');
                    })
                    .then(snapshot => {
                        if (snapshot.exists()) {
                            const firebaseOrders = snapshot.val();
                            if (Array.isArray(firebaseOrders)) {
                                orders = firebaseOrders;
                            } else if (typeof firebaseOrders === 'object') {
                                orders = Object.values(firebaseOrders);
                            }
                            saveToLocalStorage();
                        }
                        
                        // Load settings from Firebase
                        const settingsRef = db.ref('aura/settings');
                        return settingsRef.once('value');
                    })
                    .then(snapshot => {
                        if (snapshot.exists()) {
                            const firebaseSettings = snapshot.val();
                            adminSettings = {
                                adminCode: firebaseSettings.adminCode || adminSettings.adminCode,
                                adminEmail: firebaseSettings.adminEmail || adminSettings.adminEmail,
                                adminPhone: firebaseSettings.adminPhone || adminSettings.adminPhone,
                                adminContact: firebaseSettings.adminContact || adminSettings.adminContact,
                                logoImage: firebaseSettings.logoImage || adminSettings.logoImage
                            };
                            localStorage.setItem('aura_admin_settings', JSON.stringify(adminSettings));
                            updateAdminSettingsDisplay();
                            
                            if (adminSettings.logoImage) {
                                updateLogoDisplay(adminSettings.logoImage);
                            }
                        }
                        
                        // Update UI
                        loadFeaturedProducts();
                        loadAllProducts();
                        displayAdminProductsList();
                        displayStockTable();
                        updateStockCalculations();
                        displayAdminOrders();
                        
                        showNotification('Data successfully loaded from Firebase!');
                        updateFirebaseStatus(true);
                        document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
                    })
                    .catch(error => {
                        console.error('Firebase load error:', error);
                        showNotification('Failed to load from Firebase: ' + error.message, 'error');
                        updateFirebaseStatus(false);
                    });
            } catch (error) {
                console.error('Firebase load error:', error);
                showNotification('Firebase not initialized properly', 'error');
                updateFirebaseStatus(false);
            }
        }

        function updateFirebaseStatus(connected) {
            const statusElement = document.getElementById('firebaseStatus');
            if (statusElement) {
                statusElement.textContent = connected ? 'Firebase: Online' : 'Firebase: Offline';
                statusElement.className = `firebase-status ${connected ? 'firebase-connected' : 'firebase-disconnected'}`;
            }
        }

        // ========== PAGE NAVIGATION FUNCTIONS ==========
        function goToHome() {
            showHomePage();
        }

        function showHomePage() {
            hideAllPages();
            document.getElementById('homePage').style.display = 'block';
            currentPage = 'home';
            updateNavActive('home');
            loadFeaturedProducts();
        }

        function showCategoriesPage() {
            hideAllPages();
            document.getElementById('categoriesPage').style.display = 'block';
            currentPage = 'categories';
            updateNavActive('categories');
        }

        function showCategoryPage(category) {
            hideAllPages();
            const pageId = category + 'Page';
            document.getElementById(pageId).style.display = 'block';
            currentPage = category;
            updateNavActive('categories');
            loadCategoryProducts(category);
        }

        function showProductsPage() {
            hideAllPages();
            document.getElementById('productsPage').style.display = 'block';
            currentPage = 'products';
            updateNavActive('products');
            loadAllProducts();
        }

        function showContactPage() {
            hideAllPages();
            document.getElementById('contactPage').style.display = 'block';
            currentPage = 'contact';
            updateNavActive('contact');
        }

        function hideAllPages() {
            const pages = [
                'homePage', 'categoriesPage', 'productsPage', 'contactPage',
                'braceletsPage', 'ringsPage', 'chainsPage', 'watchesPage', 'cufflinksPage'
            ];
            pages.forEach(page => {
                const element = document.getElementById(page);
                if (element) element.style.display = 'none';
            });
        }

        function updateNavActive(page) {
            document.querySelectorAll('nav a').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`nav a[onclick*="${page}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }

        // ========== LOGO MANAGEMENT ==========
        function showLogoFileUpload() {
            document.getElementById('logoUpload').click();
        }

        function uploadLogo(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.size > 2 * 1024 * 1024) {
                    showNotification('Logo size should be less than 2MB', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedLogo = e.target.result;
                    updateLogoDisplay(uploadedLogo);
                    hideLogoUrlInput();
                    
                    adminSettings.logoImage = uploadedLogo;
                    localStorage.setItem('aura_admin_settings', JSON.stringify(adminSettings));
                    
                    showNotification('Logo uploaded successfully!');
                }
                reader.readAsDataURL(file);
            }
        }

        function showLogoUrlInput() {
            document.getElementById('logoUrlInputContainer').style.display = 'block';
            document.getElementById('logoUrl').focus();
        }

        function hideLogoUrlInput() {
            document.getElementById('logoUrlInputContainer').style.display = 'none';
            document.getElementById('logoUrl').value = '';
            document.getElementById('logoUrlLoading').style.display = 'none';
        }

        function loadLogoFromUrl() {
            const url = document.getElementById('logoUrl').value.trim();
            
            if (!url) {
                showNotification('Please enter a logo URL', 'error');
                return;
            }
            
            try {
                new URL(url);
            } catch (e) {
                showNotification('Please enter a valid URL', 'error');
                return;
            }
            
            document.getElementById('logoUrlLoading').style.display = 'block';
            
            const img = new Image();
            img.crossOrigin = 'anonymous';
            
            img.onload = function() {
                try {
                    const canvas = document.createElement('canvas');
                    canvas.width = 200;
                    canvas.height = 200;
                    const ctx = canvas.getContext('2d');
                    
                    ctx.beginPath();
                    ctx.arc(100, 100, 100, 0, Math.PI * 2);
                    ctx.closePath();
                    ctx.clip();
                    
                    const scale = Math.max(200 / img.width, 200 / img.height);
                    const x = (200 - img.width * scale) / 2;
                    const y = (200 - img.height * scale) / 2;
                    
                    ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
                    
                    uploadedLogo = canvas.toDataURL('image/png');
                    updateLogoDisplay(uploadedLogo);
                    hideLogoUrlInput();
                    
                    adminSettings.logoImage = uploadedLogo;
                    localStorage.setItem('aura_admin_settings', JSON.stringify(adminSettings));
                    
                    showNotification('Logo loaded successfully from URL!');
                } catch (e) {
                    showNotification('Cannot load logo from this URL. Try a different image or upload instead.', 'error');
                }
                
                document.getElementById('logoUrlLoading').style.display = 'none';
            };
            
            img.onerror = function() {
                document.getElementById('logoUrlLoading').style.display = 'none';
                showNotification('Failed to load logo from URL. Please check the URL and try again.', 'error');
            };
            
            img.src = url;
            
            setTimeout(() => {
                if (!img.complete) {
                    document.getElementById('logoUrlLoading').style.display = 'none';
                    showNotification('Logo loading timed out. Please try a different URL or upload the logo.', 'error');
                }
            }, 10000);
        }

        function updateLogoDisplay(logoImage) {
            const logoCircle = document.getElementById('logoCircle');
            const logoImg = document.getElementById('logoImage');
            const currentLogoImg = document.getElementById('currentLogoImage');
            
            if (logoImage) {
                logoImg.src = logoImage;
                currentLogoImg.src = logoImage;
                
                logoCircle.classList.add('has-image');
                currentLogoImg.parentElement.classList.add('has-image');
            } else {
                logoCircle.classList.remove('has-image');
                currentLogoImg.parentElement.classList.remove('has-image');
            }
        }

        function removeLogo() {
            uploadedLogo = null;
            adminSettings.logoImage = null;
            localStorage.setItem('aura_admin_settings', JSON.stringify(adminSettings));
            
            updateLogoDisplay(null);
            showNotification('Logo removed successfully');
        }

        // ========== ADMIN PANEL ==========
        function toggleAdminPanel() {
            const adminPanel = document.getElementById('adminPanel');
            adminPanel.classList.toggle('active');
            
            if (adminPanel.classList.contains('active')) {
                const code = prompt('Enter Admin Access Code:');
                if (code !== adminSettings.adminCode) {
                    adminPanel.classList.remove('active');
                    alert('Incorrect admin code!');
                    return;
                }
                displayAdminProductsList();
                displayStockTable();
                updateStockCalculations();
                updateAdminSettingsDisplay();
                displayAdminOrders();
            }
        }

        // ========== ADMIN SETTINGS MANAGEMENT ==========
        function saveAdminSettings() {
            const newCode = document.getElementById('adminCodeInput').value.trim();
            const newEmail = document.getElementById('adminEmail').value.trim();
            const newPhone = document.getElementById('adminPhone').value.trim();
            const newContact = document.getElementById('adminContact').value.trim();
            
            if (!newCode || !newEmail) {
                showNotification('Admin code and email are required', 'error');
                return;
            }
            
            adminSettings.adminCode = newCode;
            adminSettings.adminEmail = newEmail;
            adminSettings.adminPhone = newPhone;
            adminSettings.adminContact = newContact;
            
            localStorage.setItem('aura_admin_settings', JSON.stringify(adminSettings));
            
            updateAdminSettingsDisplay();
            
            // Sync with Firebase
            if (db) {
                try {
                    const settingsRef = db.ref('aura/settings');
                    settingsRef.set(adminSettings);
                    updateFirebaseStatus(true);
                } catch (error) {
                    console.error('Failed to sync settings with Firebase:', error);
                    updateFirebaseStatus(false);
                }
            }
            
            showNotification('Admin settings saved successfully!');
        }

        function updateAdminSettingsDisplay() {
            document.getElementById('adminCodeDisplay').textContent = adminSettings.adminCode;
            document.getElementById('adminEmailDisplay').textContent = adminSettings.adminEmail;
            document.getElementById('adminPhoneDisplay').textContent = adminSettings.adminPhone;
            document.getElementById('adminContactDisplay').textContent = adminSettings.adminContact;
            
            document.getElementById('footerEmail').textContent = adminSettings.adminEmail;
            document.getElementById('footerPhone').textContent = adminSettings.adminPhone;
            document.getElementById('footerAddress').textContent = adminSettings.adminContact;
            
            document.getElementById('adminCodeInput').value = adminSettings.adminCode;
            document.getElementById('adminEmail').value = adminSettings.adminEmail;
            document.getElementById('adminPhone').value = adminSettings.adminPhone;
            document.getElementById('adminContact').value = adminSettings.adminContact;
        }

        // ========== IMAGE UPLOAD FUNCTIONALITY ==========
        function showFileUpload() {
            document.getElementById('imageUpload').click();
        }

        function uploadImage(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    showNotification('Image size should be less than 5MB', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedImage = e.target.result;
                    showPreview(uploadedImage);
                    hideUrlInput();
                }
                reader.readAsDataURL(file);
            }
        }

        function showUrlInput() {
            document.getElementById('urlInputContainer').style.display = 'block';
            document.getElementById('imageUrl').focus();
        }

        function hideUrlInput() {
            document.getElementById('urlInputContainer').style.display = 'none';
            document.getElementById('imageUrl').value = '';
            document.getElementById('urlLoading').style.display = 'none';
        }

        function loadImageFromUrl() {
            const url = document.getElementById('imageUrl').value.trim();
            
            if (!url) {
                showNotification('Please enter an image URL', 'error');
                return;
            }
            
            try {
                new URL(url);
            } catch (e) {
                showNotification('Please enter a valid URL', 'error');
                return;
            }
            
            document.getElementById('urlLoading').style.display = 'block';
            
            const img = new Image();
            img.crossOrigin = 'anonymous';
            
            img.onload = function() {
                try {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    
                    uploadedImage = canvas.toDataURL('image/jpeg', 0.9);
                    showPreview(uploadedImage);
                    hideUrlInput();
                    showNotification('Image loaded successfully from URL!');
                } catch (e) {
                    showNotification('Cannot load image from this URL. Try a different image or upload instead.', 'error');
                }
                
                document.getElementById('urlLoading').style.display = 'none';
            };
            
            img.onerror = function() {
                document.getElementById('urlLoading').style.display = 'none';
                showNotification('Failed to load image from URL. Please check the URL and try again.', 'error');
            };
            
            img.src = url;
            
            setTimeout(() => {
                if (!img.complete) {
                    document.getElementById('urlLoading').style.display = 'none';
                    showNotification('Image loading timed out. Please try a different URL or upload the image.', 'error');
                }
            }, 10000);
        }

        function showPreview(imageSrc) {
            document.getElementById('previewImage').src = imageSrc;
            document.getElementById('imagePreview').style.display = 'block';
        }

        function removeImage() {
            uploadedImage = null;
            document.getElementById('previewImage').src = '';
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('imageUpload').value = '';
            hideUrlInput();
        }

        // ========== STOCK MANAGEMENT FUNCTIONS ==========
        function showStockTab(tabName) {
            currentStockTab = tabName;
            
            // Update active tab
            document.querySelectorAll('.stock-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.stock-tab[onclick*="${tabName}"]`).classList.add('active');
            
            // Filter products based on tab
            let filteredProducts = [...products];
            
            switch(tabName) {
                case 'low':
                    filteredProducts = products.filter(p => (p.stock || 0) < 5);
                    break;
                case 'sales':
                    filteredProducts = products.filter(p => (p.soldStock || 0) > 0);
                    filteredProducts.sort((a, b) => (b.soldStock || 0) - (a.soldStock || 0));
                    break;
                case 'profit':
                    filteredProducts = products.filter(p => {
                        const profit = calculateProfit(p);
                        return profit > 0;
                    });
                    filteredProducts.sort((a, b) => calculateProfit(b) - calculateProfit(a));
                    break;
            }
            
            displayStockTable(filteredProducts);
        }

        function calculateProfit(product) {
            const cost = product.costPrice || 0;
            const price = product.price || 0;
            const sold = product.soldStock || 0;
            return ((price - cost) * sold);
        }

        function calculateTotalCost(product) {
            const initialStock = product.initialStock || product.stock || 0;
            const costPrice = product.costPrice || 0;
            return initialStock * costPrice;
        }

        function calculateTotalSales(product) {
            const soldStock = product.soldStock || 0;
            const sellingPrice = product.price || 0;
            return soldStock * sellingPrice;
        }

        function updateStockCalculations() {
            const totalProducts = products.length;
            let totalStockValue = 0;
            let lowStockItems = 0;
            let totalProfit = 0;
            let totalSales = 0;
            let totalInvestment = 0;
            
            products.forEach(product => {
                const cost = calculateTotalCost(product);
                const sales = calculateTotalSales(product);
                const profit = calculateProfit(product);
                
                totalStockValue += cost;
                totalSales += sales;
                totalProfit += profit;
                totalInvestment += cost;
                
                if ((product.stock || 0) < 5) {
                    lowStockItems++;
                }
            });
            
            // Update quick stats
            document.getElementById('totalProductsStat').textContent = totalProducts;
            document.getElementById('totalStockValueStat').textContent = `Rs ${totalStockValue.toLocaleString()}`;
            document.getElementById('lowStockItemsStat').textContent = lowStockItems;
            document.getElementById('totalProfitStat').textContent = `Rs ${totalProfit.toLocaleString()}`;
            document.getElementById('totalSalesStat').textContent = `Rs ${totalSales.toLocaleString()}`;
            
            // Update summary
            document.getElementById('summaryTotalProducts').textContent = totalProducts;
            document.getElementById('summaryTotalInvestment').textContent = `Rs ${totalInvestment.toLocaleString()}`;
            document.getElementById('summaryTotalSales').textContent = `Rs ${totalSales.toLocaleString()}`;
            document.getElementById('summaryNetProfit').textContent = `Rs ${totalProfit.toLocaleString()}`;
            
            // Update stock alerts
            const stockAlerts = document.getElementById('stockAlerts');
            stockAlerts.innerHTML = '';
            
            const lowStockProducts = products.filter(p => (p.stock || 0) < 5);
            if (lowStockProducts.length === 0) {
                stockAlerts.innerHTML = '<p style="color: #4CAF50;">All products have sufficient stock</p>';
            } else {
                lowStockProducts.forEach(product => {
                    const alertDiv = document.createElement('div');
                    alertDiv.style.padding = '5px';
                    alertDiv.style.marginBottom = '5px';
                    alertDiv.style.background = 'rgba(255, 68, 68, 0.1)';
                    alertDiv.style.borderRadius = '3px';
                    alertDiv.style.fontSize = '12px';
                    alertDiv.innerHTML = `<strong>${product.code || product.name}</strong>: Low stock (${product.stock || 0} remaining)`;
                    stockAlerts.appendChild(alertDiv);
                });
            }
            
            displayStockTable();
        }

        function displayStockTable(filteredProducts = products) {
            const tableBody = document.getElementById('stockTableBody');
            tableBody.innerHTML = '';
            
            if (!filteredProducts || filteredProducts.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="13" style="text-align: center; padding: 30px; color: #999;">
                            <i class="fas fa-box-open" style="font-size: 48px; margin-bottom: 15px;"></i>
                            <p>No products found.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            filteredProducts.sort((a, b) => {
                if (a.code && b.code) {
                    return a.code.localeCompare(b.code);
                }
                return (b.id || 0) - (a.id || 0);
            }).forEach(product => {
                if (!product || !product.name) return;
                
                const initialStock = product.initialStock || product.stock || 0;
                const currentStock = product.stock || 0;
                const soldStock = product.soldStock || 0;
                const costPrice = product.costPrice || 0;
                const sellingPrice = product.price || 0;
                const totalCost = calculateTotalCost(product);
                const totalSales = calculateTotalSales(product);
                const profit = calculateProfit(product);
                const stockStatus = currentStock === 0 ? 'Out of Stock' : 
                                  currentStock < 5 ? 'Low Stock' : 'In Stock';
                
                const row = document.createElement('tr');
                if (currentStock < 5) {
                    row.classList.add('low-stock');
                }
                
                row.innerHTML = `
                    <td><strong>${product.code || 'N/A'}</strong></td>
                    <td>${product.name}</td>
                    <td>${getCategoryName(product.category)}</td>
                    <td>Rs ${costPrice.toLocaleString()}</td>
                    <td>Rs ${sellingPrice.toLocaleString()}</td>
                    <td>${initialStock}</td>
                    <td>${currentStock}</td>
                    <td>${soldStock}</td>
                    <td>Rs ${totalCost.toLocaleString()}</td>
                    <td>Rs ${totalSales.toLocaleString()}</td>
                    <td class="${profit >= 0 ? 'profit-positive' : 'profit-negative'}">
                        Rs ${profit.toLocaleString()}
                    </td>
                    <td>
                        <span style="color: ${stockStatus === 'In Stock' ? '#4CAF50' : stockStatus === 'Low Stock' ? '#FF9800' : '#ff4444'}">
                            ${stockStatus}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="edit-btn" onclick="editStockProduct(${product.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn-small delete-btn" onclick="deleteProduct(${product.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        function searchStock() {
            const searchTerm = document.getElementById('stockSearch').value.toLowerCase();
            const filteredProducts = products.filter(product => {
                return (
                    (product.name && product.name.toLowerCase().includes(searchTerm)) ||
                    (product.code && product.code.toLowerCase().includes(searchTerm)) ||
                    (product.category && getCategoryName(product.category).toLowerCase().includes(searchTerm))
                );
            });
            displayStockTable(filteredProducts);
        }

        function filterStock() {
            const categoryFilter = document.getElementById('categoryFilter').value;
            const statusFilter = document.getElementById('stockStatusFilter').value;
            
            let filteredProducts = products;
            
            if (categoryFilter) {
                filteredProducts = filteredProducts.filter(p => p.category === categoryFilter);
            }
            
            if (statusFilter) {
                if (statusFilter === 'low') {
                    filteredProducts = filteredProducts.filter(p => (p.stock || 0) < 5 && (p.stock || 0) > 0);
                } else if (statusFilter === 'out') {
                    filteredProducts = filteredProducts.filter(p => (p.stock || 0) === 0);
                } else if (statusFilter === 'available') {
                    filteredProducts = filteredProducts.filter(p => (p.stock || 0) > 0);
                }
            }
            
            displayStockTable(filteredProducts);
        }

        function exportToExcel() {
            const data = [];
            
            // Add headers
            data.push([
                'Product Code',
                'Product Name',
                'Category',
                'Cost Price (Rs)',
                'Selling Price (Rs)',
                'Initial Stock',
                'Remaining Stock',
                'Sold Stock',
                'Total Cost (Rs)',
                'Total Sales (Rs)',
                'Profit (Rs)',
                'Stock Status'
            ]);
            
            // Add product data
            products.forEach(product => {
                const initialStock = product.initialStock || product.stock || 0;
                const currentStock = product.stock || 0;
                const soldStock = product.soldStock || 0;
                const costPrice = product.costPrice || 0;
                const sellingPrice = product.price || 0;
                const totalCost = calculateTotalCost(product);
                const totalSales = calculateTotalSales(product);
                const profit = calculateProfit(product);
                const stockStatus = currentStock === 0 ? 'Out of Stock' : 
                                  currentStock < 5 ? 'Low Stock' : 'In Stock';
                
                data.push([
                    product.code || 'N/A',
                    product.name,
                    getCategoryName(product.category),
                    costPrice,
                    sellingPrice,
                    initialStock,
                    currentStock,
                    soldStock,
                    totalCost,
                    totalSales,
                    profit,
                    stockStatus
                ]);
            });
            
            // Add summary row
            const totalProducts = products.length;
            let totalInvestment = 0;
            let totalSalesValue = 0;
            let totalProfitValue = 0;
            
            products.forEach(product => {
                totalInvestment += calculateTotalCost(product);
                totalSalesValue += calculateTotalSales(product);
                totalProfitValue += calculateProfit(product);
            });
            
            data.push([]); // Empty row
            data.push(['SUMMARY', '', '', '', '', '', '', '', '', '', '', '']);
            data.push(['Total Products', totalProducts, '', '', '', '', '', '', '', '', '', '']);
            data.push(['Total Investment', `Rs ${totalInvestment.toLocaleString()}`, '', '', '', '', '', '', '', '', '', '']);
            data.push(['Total Sales', `Rs ${totalSalesValue.toLocaleString()}`, '', '', '', '', '', '', '', '', '', '']);
            data.push(['Net Profit', `Rs ${totalProfitValue.toLocaleString()}`, '', '', '', '', '', '', '', '', '', '']);
            
            // Convert to CSV
            const csvContent = data.map(row => 
                row.map(cell => `"${cell}"`).join(',')
            ).join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `aura-stock-report-${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Stock data exported to Excel file!');
        }

        function showAddProductStock() {
            document.getElementById('addProductModal').classList.add('active');
        }

        function closeAddProductModal() {
            document.getElementById('addProductModal').classList.remove('active');
            document.getElementById('quickProductForm').reset();
        }

        function editStockProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Product not found', 'error');
                return;
            }
            
            document.getElementById('editProductId').value = product.id;
            document.getElementById('editProductCode').value = product.code || '';
            document.getElementById('editProductName').value = product.name || '';
            document.getElementById('editCategory').value = product.category || '';
            document.getElementById('editStock').value = product.stock || 0;
            document.getElementById('editCostPrice').value = product.costPrice || 0;
            document.getElementById('editSellingPrice').value = product.price || 0;
            document.getElementById('editSoldStock').value = product.soldStock || 0;
            document.getElementById('editInitialStock').value = product.initialStock || product.stock || 0;
            document.getElementById('editDescription').value = product.description || '';
            
            document.getElementById('editProductModal').classList.add('active');
        }

        function closeEditProductModal() {
            document.getElementById('editProductModal').classList.remove('active');
            document.getElementById('editProductForm').reset();
        }

        function showDeleteProductModal() {
            const productId = document.getElementById('editProductId').value;
            const product = products.find(p => p.id == productId);
            
            if (product) {
                productToDelete = productId;
                document.getElementById('confirmDeleteMessage').textContent = 
                    `Are you sure you want to delete "${product.name}"? This action cannot be undone.`;
                document.getElementById('confirmDeleteModal').classList.add('active');
                closeEditProductModal();
            }
        }

        // ========== PRODUCT DISPLAY FUNCTIONS ==========
        function loadFeaturedProducts() {
            const container = document.getElementById('featuredProductsContainer');
            container.innerHTML = '';
            
            const featuredProducts = products.slice(0, 6); // Show first 6 products as featured
            
            if (featuredProducts.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 60px; color: #999;">
                        <i class="fas fa-gem" style="font-size: 64px; margin-bottom: 20px; color: #d4af37;"></i>
                        <h3 style="color: #d4af37; margin-bottom: 15px;">No Featured Products</h3>
                        <p>Add products through the admin panel to display them here.</p>
                    </div>
                `;
                return;
            }
            
            featuredProducts.forEach(product => {
                if (!product || !product.name || !product.description) return;
                
                const productCard = createProductCard(product);
                container.appendChild(productCard);
            });
        }

        function loadCategoryProducts(category) {
            const container = document.getElementById(category + 'Products');
            container.innerHTML = '';
            
            const categoryProducts = products.filter(p => p.category === category);
            
            if (categoryProducts.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 60px; color: #999;">
                        <i class="fas fa-gem" style="font-size: 64px; margin-bottom: 20px; color: #d4af37;"></i>
                        <h3 style="color: #d4af37; margin-bottom: 15px;">No Products in this Category</h3>
                        <p>Add products in this category through the admin panel.</p>
                    </div>
                `;
                return;
            }
            
            categoryProducts.forEach(product => {
                if (!product || !product.name || !product.description) return;
                
                const productCard = createProductCard(product);
                container.appendChild(productCard);
            });
        }

        function loadAllProducts() {
            const container = document.getElementById('allProductsContainer');
            container.innerHTML = '';
            
            if (products.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 60px; color: #999;">
                        <i class="fas fa-gem" style="font-size: 64px; margin-bottom: 20px; color: #d4af37;"></i>
                        <h3 style="color: #d4af37; margin-bottom: 15px;">No Products Available</h3>
                        <p>Add products through the admin panel to display them here.</p>
                    </div>
                `;
                return;
            }
            
            products.forEach(product => {
                if (!product || !product.name || !product.description) return;
                
                const productCard = createProductCard(product);
                container.appendChild(productCard);
            });
        }

        function createProductCard(product) {
            const productCard = document.createElement('div');
            productCard.className = 'product-card';
            productCard.innerHTML = `
                <div class="product-image">
                    <img src="${product.image || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzJhMmEyYSIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNkNGFlMzciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5iYPC90ZXh0Pjwvc3ZnPg=='}" alt="${product.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzJhMmEyYSIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNkNGFlMzciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5iYPC90ZXh0Pjwvc3ZnPg=='">
                </div>
                <div class="product-info">
                    <div class="product-category">${getCategoryName(product.category)}</div>
                    <h3 class="product-title">${product.name}</h3>
                    <p>${product.description}</p>
                    <div class="product-price">Rs ${product.price || 0}</div>
                    <div class="product-actions">
                        <button class="btn btn-primary btn-small" onclick="openOrderModal(${product.id})">Order Now</button>
                        ${product.stock < 10 ? `<span style="color: #ff4444; font-size: 12px;">Low Stock: ${product.stock}</span>` : ''}
                    </div>
                </div>
            `;
            return productCard;
        }

        function getCategoryName(category) {
            const categories = {
                'bracelets': 'Bracelets',
                'rings': 'Rings',
                'chains': 'Chains & Necklaces',
                'watches': 'Watches',
                'cufflinks': 'Cufflinks'
            };
            return categories[category] || category || 'Uncategorized';
        }

        // ========== ADMIN PRODUCTS LIST ==========
        function displayAdminProductsList() {
            const table = document.getElementById('adminProductsTable');
            table.innerHTML = '';
            
            document.getElementById('productCount').textContent = products ? products.length : 0;
            
            if (!products || products.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="9" style="text-align: center; padding: 30px; color: #999;">
                            <i class="fas fa-box-open" style="font-size: 48px; margin-bottom: 15px;"></i>
                            <p>No products found. Add your first product!</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            products.sort((a, b) => (b.id || 0) - (a.id || 0)).forEach(product => {
                if (!product || !product.name) return;
                
                const profit = calculateProfit(product);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${product.code || 'N/A'}</strong></td>
                    <td>
                        <strong>${product.name}</strong><br>
                        <small style="color: #999;">${(product.description || '').substring(0, 50)}${(product.description || '').length > 50 ? '...' : ''}</small>
                    </td>
                    <td>${getCategoryName(product.category)}</td>
                    <td>Rs ${product.costPrice || 0}</td>
                    <td>Rs ${product.price || 0}</td>
                    <td>
                        <span style="color: ${(product.stock || 0) < 10 ? '#ff4444' : (product.stock || 0) < 20 ? '#ff9800' : '#4CAF50'}">
                            ${product.stock || 0}
                        </span>
                    </td>
                    <td>${product.soldStock || 0}</td>
                    <td>
                        <span style="color: ${profit >= 0 ? '#4CAF50' : '#ff4444'}">
                            Rs ${profit.toLocaleString()}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="edit-btn" onclick="editProduct(${product.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn-small delete-btn" onclick="deleteProduct(${product.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </td>
                `;
                table.appendChild(row);
            });
        }

        // ========== ORDER MANAGEMENT ==========
        function displayAdminOrders() {
            const table = document.getElementById('adminOrdersTable');
            table.innerHTML = '';
            
            document.getElementById('totalOrdersCount').textContent = orders.length;
            
            if (orders.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 30px; color: #999;">
                            <i class="fas fa-shopping-cart" style="font-size: 48px; margin-bottom: 15px;"></i>
                            <p>No orders yet.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            orders.slice(0, 20).forEach(order => { // Show last 20 orders
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${order.id}</strong></td>
                    <td>
                        <strong>${order.customer}</strong><br>
                        <small>${order.email}</small>
                    </td>
                    <td>${order.product} (${order.productCode})</td>
                    <td>${order.amount}</td>
                    <td>${new Date(order.date).toLocaleDateString()}</td>
                    <td>
                        <span class="status-${order.status}">
                            ${order.status === 'pending' ? 'Pending' : 'Completed'}
                        </span>
                    </td>
                    <td>
                        <button class="btn-small delete-btn" onclick="deleteOrder('${order.id}')">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </td>
                `;
                table.appendChild(row);
            });
        }

        function refreshOrdersList() {
            displayAdminOrders();
            showNotification('Orders list refreshed');
        }

        function deleteOrder(orderId) {
            if (confirm('Are you sure you want to delete this order?')) {
                const index = orders.findIndex(o => o.id === orderId);
                if (index !== -1) {
                    orders.splice(index, 1);
                    saveToLocalStorage();
                    
                    // Sync with Firebase
                    if (db) {
                        try {
                            const ordersRef = db.ref('aura/orders');
                            ordersRef.set(orders);
                        } catch (error) {
                            console.error('Failed to sync with Firebase:', error);
                        }
                    }
                    
                    displayAdminOrders();
                    showNotification('Order deleted successfully');
                }
            }
        }

        function deleteAllOrders() {
            if (orders.length === 0) {
                showNotification('No orders to delete', 'error');
                return;
            }
            
            if (confirm(`Are you sure you want to delete ALL ${orders.length} orders? This action cannot be undone!`)) {
                orders = [];
                saveToLocalStorage();
                
                // Sync with Firebase
                if (db) {
                    try {
                        const ordersRef = db.ref('aura/orders');
                        ordersRef.set(orders);
                    } catch (error) {
                        console.error('Failed to sync with Firebase:', error);
                    }
                }
                
                displayAdminOrders();
                showNotification('All orders have been deleted');
            }
        }

        // ========== PRODUCT CRUD OPERATIONS ==========
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const productCode = document.getElementById('productCode').value.trim().toUpperCase();
            const productName = document.getElementById('productName').value.trim();
            const productCategory = document.getElementById('productCategory').value;
            const productPrice = parseFloat(document.getElementById('productPrice').value);
            const costPrice = parseFloat(document.getElementById('costPrice').value);
            const productDescription = document.getElementById('productDescription').value.trim();
            const productStock = parseInt(document.getElementById('productStock').value);
            
            if (!productCode || !productName || !productCategory || !productDescription) {
                showNotification('Please fill all required fields', 'error');
                return;
            }
            
            if (costPrice >= productPrice) {
                showNotification('Selling price must be greater than cost price', 'error');
                return;
            }
            
            if (editProductId) {
                const index = products.findIndex(p => p.id === editProductId);
                if (index !== -1) {
                    products[index] = {
                        ...products[index],
                        code: productCode,
                        name: productName,
                        category: productCategory,
                        price: productPrice,
                        costPrice: costPrice,
                        description: productDescription,
                        stock: productStock,
                        image: uploadedImage || products[index].image
                    };
                    
                    showNotification(`Product updated: ${productName}`);
                    editProductId = null;
                    document.getElementById('productForm').querySelector('button[type="submit"]').textContent = 'Add Product';
                }
            } else {
                const newProduct = {
                    id: products.length > 0 ? Math.max(...products.map(p => p.id || 0)) + 1 : 1,
                    code: productCode,
                    name: productName,
                    category: productCategory,
                    price: productPrice,
                    costPrice: costPrice,
                    description: productDescription,
                    stock: productStock,
                    initialStock: productStock,
                    soldStock: 0,
                    image: uploadedImage || "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzJhMmEyYSIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNkNGFlMzciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5iYPC90ZXh0Pjwvc3ZnPg=="
                };
                
                products.push(newProduct);
                showNotification(`Product added: ${productName}`);
            }
            
            saveToLocalStorage();
            
            // Sync with Firebase
            if (db) {
                try {
                    const productsRef = db.ref('aura/products');
                    productsRef.set(products);
                    updateFirebaseStatus(true);
                } catch (error) {
                    console.error('Failed to sync with Firebase:', error);
                    updateFirebaseStatus(false);
                }
            }
            
            loadFeaturedProducts();
            loadAllProducts();
            displayAdminProductsList();
            displayStockTable();
            updateStockCalculations();
            clearForm();
            
            document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
        });

        document.getElementById('quickProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const productCode = document.getElementById('quickProductCode').value.trim().toUpperCase();
            const productName = document.getElementById('quickProductName').value.trim();
            const productCategory = document.getElementById('quickCategory').value;
            const productPrice = parseFloat(document.getElementById('quickSellingPrice').value);
            const costPrice = parseFloat(document.getElementById('quickCostPrice').value);
            const productDescription = document.getElementById('quickDescription').value.trim();
            const productStock = parseInt(document.getElementById('quickStock').value);
            
            if (!productCode || !productName || !productCategory) {
                showNotification('Please fill all required fields', 'error');
                return;
            }
            
            if (costPrice >= productPrice) {
                showNotification('Selling price must be greater than cost price', 'error');
                return;
            }
            
            const newProduct = {
                id: products.length > 0 ? Math.max(...products.map(p => p.id || 0)) + 1 : 1,
                code: productCode,
                name: productName,
                category: productCategory,
                price: productPrice,
                costPrice: costPrice,
                description: productDescription,
                stock: productStock,
                initialStock: productStock,
                soldStock: 0,
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzJhMmEyYSIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNkNGFlMzciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5iYPC90ZXh0Pjwvc3ZnPg=="
            };
            
            products.push(newProduct);
            saveToLocalStorage();
            
            // Sync with Firebase
            if (db) {
                try {
                    const productsRef = db.ref('aura/products');
                    productsRef.set(products);
                    updateFirebaseStatus(true);
                } catch (error) {
                    console.error('Failed to sync with Firebase:', error);
                    updateFirebaseStatus(false);
                }
            }
            
            loadFeaturedProducts();
            loadAllProducts();
            displayAdminProductsList();
            displayStockTable();
            updateStockCalculations();
            closeAddProductModal();
            
            showNotification(`Product added: ${productName}`);
            document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
        });

        document.getElementById('editProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const productId = parseInt(document.getElementById('editProductId').value);
            const productCode = document.getElementById('editProductCode').value.trim().toUpperCase();
            const productName = document.getElementById('editProductName').value.trim();
            const productCategory = document.getElementById('editCategory').value;
            const productPrice = parseFloat(document.getElementById('editSellingPrice').value);
            const costPrice = parseFloat(document.getElementById('editCostPrice').value);
            const productDescription = document.getElementById('editDescription').value.trim();
            const productStock = parseInt(document.getElementById('editStock').value);
            
            if (!productCode || !productName || !productCategory) {
                showNotification('Please fill all required fields', 'error');
                return;
            }
            
            if (costPrice >= productPrice) {
                showNotification('Selling price must be greater than cost price', 'error');
                return;
            }
            
            const index = products.findIndex(p => p.id === productId);
            if (index !== -1) {
                const soldStock = products[index].soldStock || 0;
                const initialStock = productStock + soldStock;
                
                products[index] = {
                    ...products[index],
                    code: productCode,
                    name: productName,
                    category: productCategory,
                    price: productPrice,
                    costPrice: costPrice,
                    description: productDescription,
                    stock: productStock,
                    initialStock: initialStock
                };
                
                saveToLocalStorage();
                
                // Sync with Firebase
                if (db) {
                    try {
                        const productsRef = db.ref('aura/products');
                        productsRef.set(products);
                        updateFirebaseStatus(true);
                    } catch (error) {
                        console.error('Failed to sync with Firebase:', error);
                        updateFirebaseStatus(false);
                    }
                }
                
                loadFeaturedProducts();
                loadAllProducts();
                displayAdminProductsList();
                displayStockTable();
                updateStockCalculations();
                closeEditProductModal();
                
                showNotification(`Product updated: ${productName}`);
                document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
            }
        });

        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Product not found', 'error');
                return;
            }
            
            document.getElementById('productCode').value = product.code || '';
            document.getElementById('productName').value = product.name || '';
            document.getElementById('productCategory').value = product.category || '';
            document.getElementById('productPrice').value = product.price || 0;
            document.getElementById('costPrice').value = product.costPrice || 0;
            document.getElementById('productDescription').value = product.description || '';
            document.getElementById('productStock').value = product.stock || 0;
            
            if (product.image) {
                uploadedImage = product.image;
                document.getElementById('previewImage').src = product.image;
                document.getElementById('imagePreview').style.display = 'block';
            }
            
            editProductId = productId;
            document.getElementById('productForm').querySelector('button[type="submit"]').textContent = 'Update Product';
            
            document.getElementById('productName').focus();
            showNotification(`Editing product: ${product.name}`);
        }

        function deleteProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Product not found', 'error');
                return;
            }
            
            productToDelete = productId;
            document.getElementById('confirmDeleteMessage').textContent = 
                `Are you sure you want to delete "${product.name}"? This action cannot be undone.`;
            document.getElementById('confirmDeleteModal').classList.add('active');
        }

        function confirmDelete() {
            if (productToDelete) {
                const index = products.findIndex(p => p.id === productToDelete);
                if (index !== -1) {
                    const deletedProduct = products[index];
                    products.splice(index, 1);
                    
                    saveToLocalStorage();
                    
                    // Sync with Firebase
                    if (db) {
                        try {
                            const productsRef = db.ref('aura/products');
                            productsRef.set(products);
                            updateFirebaseStatus(true);
                        } catch (error) {
                            console.error('Failed to sync with Firebase:', error);
                            updateFirebaseStatus(false);
                        }
                    }
                    
                    loadFeaturedProducts();
                    loadAllProducts();
                    displayAdminProductsList();
                    displayStockTable();
                    updateStockCalculations();
                    
                    showNotification(`Product deleted: ${deletedProduct.name}`);
                    document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
                }
            }
            
            cancelDelete();
            productToDelete = null;
        }

        function cancelDelete() {
            productToDelete = null;
            document.getElementById('confirmDeleteModal').classList.remove('active');
        }

        function deleteAllProducts() {
            if (!products || products.length === 0) {
                showNotification('No products to delete', 'error');
                return;
            }
            
            if (confirm(`Are you sure you want to delete ALL ${products.length} products? This action cannot be undone!`)) {
                const deletedCount = products.length;
                products = [];
                
                saveToLocalStorage();
                
                // Sync with Firebase
                if (db) {
                    try {
                        const productsRef = db.ref('aura/products');
                        productsRef.set([]);
                        updateFirebaseStatus(true);
                    } catch (error) {
                        console.error('Failed to sync with Firebase:', error);
                        updateFirebaseStatus(false);
                    }
                }
                
                loadFeaturedProducts();
                loadAllProducts();
                displayAdminProductsList();
                displayStockTable();
                updateStockCalculations();
                
                showNotification(`All ${deletedCount} products have been deleted`);
                document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
            }
        }

        function refreshProductsList() {
            displayAdminProductsList();
            displayStockTable();
            updateStockCalculations();
            showNotification('Products list refreshed');
        }

        // ========== ORDER MODAL FUNCTIONS ==========
        function openOrderModal(productId) {
            currentOrderProduct = products.find(p => p.id === productId);
            if (!currentOrderProduct) {
                showNotification('Product not found', 'error');
                return;
            }
            
            if (currentOrderProduct.stock <= 0) {
                showNotification('This product is out of stock!', 'error');
                return;
            }
            
            document.getElementById('orderSummary').innerHTML = `
                <strong>${currentOrderProduct.name}</strong><br>
                Code: ${currentOrderProduct.code || 'N/A'}<br>
                Price: Rs ${currentOrderProduct.price}<br>
                Category: ${getCategoryName(currentOrderProduct.category)}<br>
                <small>${currentOrderProduct.description}</small>
            `;
            
            document.getElementById('orderModal').classList.add('active');
        }

        function closeOrderModal() {
            document.getElementById('orderModal').classList.remove('active');
            document.getElementById('orderForm').reset();
            currentOrderProduct = null;
        }

        document.getElementById('orderForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const orderId = 'ORD-' + (orders.length + 1).toString().padStart(3, '0');
            const orderData = {
                id: orderId,
                customer: document.getElementById('customerName').value,
                email: document.getElementById('customerEmail').value,
                phone: document.getElementById('customerPhone').value,
                address: document.getElementById('customerAddress').value,
                product: currentOrderProduct.name,
                productCode: currentOrderProduct.code,
                productId: currentOrderProduct.id,
                amount: `Rs ${currentOrderProduct.price}`,
                status: 'pending',
                date: new Date().toISOString()
            };
            
            // Update product stock
            if (currentOrderProduct.stock > 0) {
                currentOrderProduct.stock--;
                currentOrderProduct.soldStock = (currentOrderProduct.soldStock || 0) + 1;
            }
            
            // Add to orders
            orders.unshift(orderData);
            
            saveToLocalStorage();
            
            // Sync with Firebase
            if (db) {
                try {
                    const ordersRef = db.ref('aura/orders');
                    await ordersRef.set(orders);
                    
                    const productsRef = db.ref('aura/products');
                    await productsRef.set(products);
                    updateFirebaseStatus(true);
                } catch (error) {
                    console.error('Failed to sync with Firebase:', error);
                    updateFirebaseStatus(false);
                }
            }
            
            loadFeaturedProducts();
            loadAllProducts();
            displayAdminProductsList();
            displayStockTable();
            updateStockCalculations();
            displayAdminOrders();
            
            closeOrderModal();
            
            const emailSent = await sendRealEmail(orderData);
            
            if (emailSent) {
                showNotification(`Order placed! Order ID: ${orderId}. Email sent to admin.`);
            } else {
                showNotification(`Order placed! Order ID: ${orderId}. Email notification failed.`);
            }
            
            document.getElementById('lastCheck').textContent = new Date().toLocaleTimeString();
        });

        // ========== EMAIL FUNCTIONALITY ==========
        async function sendRealEmail(orderData) {
            try {
                const subject = `New Order: ${orderData.id} - Aura Collection`;
                const body = `
Order Details:
Order ID: ${orderData.id}
Customer: ${orderData.customer}
Email: ${orderData.email}
Phone: ${orderData.phone}
Product: ${orderData.product} (${orderData.productCode})
Amount: ${orderData.amount}
Address: ${orderData.address}
Order Date: ${new Date(orderData.date).toLocaleString()}

Order placed at Aura Collection Gents Jewelry.
                `;
                
                const mailtoLink = `mailto:${adminSettings.adminEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                window.open(mailtoLink, '_blank');
                return true;
                
            } catch (error) {
                console.error('Email error:', error);
                return false;
            }
        }

        function sendAdminEmail(subject, body) {
            const mailtoLink = `mailto:${adminSettings.adminEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.open(mailtoLink, '_blank');
        }

        // ========== UTILITY FUNCTIONS ==========
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }

        function clearForm() {
            document.getElementById('productForm').reset();
            removeImage();
            hideUrlInput();
            editProductId = null;
            document.getElementById('productForm').querySelector('button[type="submit"]').textContent = 'Add Product';
        }

        function saveToLocalStorage() {
            localStorage.setItem('aura_products', JSON.stringify(products));
            localStorage.setItem('aura_orders', JSON.stringify(orders));
            localStorage.setItem('aura_admin_settings', JSON.stringify(adminSettings));
        }

        function exportData() {
            const data = {
                products: products,
                orders: orders,
                adminSettings: adminSettings,
                stockSummary: {
                    totalProducts: products.length,
                    totalInvestment: products.reduce((sum, p) => sum + calculateTotalCost(p), 0),
                    totalSales: products.reduce((sum, p) => sum + calculateTotalSales(p), 0),
                    totalProfit: products.reduce((sum, p) => sum + calculateProfit(p), 0)
                },
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `aura-collection-data-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Data exported successfully!');
        }

        // ========== INITIALIZE ==========
        document.addEventListener('DOMContentLoaded', function() {
            if (adminSettings.logoImage) {
                updateLogoDisplay(adminSettings.logoImage);
            }
            
            updateAdminSettingsDisplay();
            showHomePage();
            loadFeaturedProducts();
            displayAdminProductsList();
            displayStockTable();
            updateStockCalculations();
            
            // Auto-save every 5 minutes
            setInterval(saveToLocalStorage, 5 * 60 * 1000);
            
            // Auto-sync with Firebase every 10 minutes
            setInterval(() => {
                if (db) {
                    syncWithFirebase();
                }
            }, 10 * 60 * 1000);
            
            // Check URL for admin code
            const urlParams = new URLSearchParams(window.location.search);
            const adminCode = urlParams.get('admin');
            
            if (adminCode === adminSettings.adminCode) {
                toggleAdminPanel();
            }
            
            // Initialize Firebase status
            setTimeout(() => {
                if (db) {
                    updateFirebaseStatus(true);
                    showNotification('Firebase connected successfully!');
                    
                    // Try to load from Firebase
                    loadFromFirebase().catch(error => {
                        console.log('Could not load from Firebase, using local data:', error);
                    });
                } else {
                    updateFirebaseStatus(false);
                    showNotification('Firebase not connected. Using local storage.', 'error');
                }
            }, 2000);
            
            showNotification('Aura Collection - Gents Jewelry Store is ready!');
        });
    </script>
</body>
</html>